<h1 align="center"> 
	API REST em Node.js de transa√ß√µes financeiras
</h1>
<p align="center">
 <a href="#-sobre-o-projeto">Sobre</a> ‚Ä¢
 <a href="#-vitrine-dev">Vitrine Dev</a> ‚Ä¢
 <a href="#-tecnologias">Tecnologias</a> ‚Ä¢
 <a href="#-instala√ß√£o">Instala√ß√µes</a> ‚Ä¢
 <a href="#-funcionalidades">Funcionalidades</a> ‚Ä¢
 <a href="#-autor">Autor</a> ‚Ä¢ 
 <a href="#-licen√ßa">Licen√ßa</a>
</p>

&nbsp;
<a id="-sobre-o-projeto"></a>

![Insomnia](https://github.com/LivioAlvarenga/API-Rest-Node-Transactions/blob/master/files/insomnia.png?raw=true#vitrinedev)

## üíª Sobre o projeto

üöÄ API Rest em Node.js de transa√ß√µes financeiras.

&nbsp;

<p align="center">
  <a href="#license"><img src="https://img.shields.io/github/license/LivioAlvarenga/API-Rest-Node-Transactions?color=ff0000"></a>
  <a href="https://github.com/LivioAlvarenga/API-Rest-Node-Transactions/issues"><img src="https://img.shields.io/github/issues/LivioAlvarenga/API-Rest-Node-Transactions" alt="issue site API-Rest-Node-Transactions" /></a>
  <a href="https://github.com/LivioAlvarenga/API-Rest-Node-Transactions"><img src="https://img.shields.io/github/languages/count/LivioAlvarenga/API-Rest-Node-Transactions" alt="total amount of programming languages used in the project" /></a>
  <a href="https://github.com/LivioAlvarenga/API-Rest-Node-Transactions"><img src="https://img.shields.io/github/languages/top/LivioAlvarenga/API-Rest-Node-Transactions" alt="most used language in the projects" /></a>
  <a href="https://github.com/LivioAlvarenga/API-Rest-Node-Transactions"><img src="https://img.shields.io/github/repo-size/LivioAlvarenga/API-Rest-Node-Transactions" alt="repository size" /></a>
<p>

<p align="center">
  <a href= "https://api-rest-node-transactions.onrender.com"><img alt="deploy badge" height=40 src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/16529b41db0c4089f62eccbe301f46b3d8f157cf/files/render-badge.svg"></a>
<p>

&nbsp;

---

&nbsp;
<a id="-vitrine-dev"></a>

## üì∫ Vitrine Dev

| :placard: Vitrine.Dev |                                                                                                                  |
| --------------------- | ---------------------------------------------------------------------------------------------------------------- |
| :sparkles: Nome       | **API REST em Node.js de transa√ß√µes financeiras**                                                                |
| :label: Tecnologias   | NodeJs, TypeScript, JavaScript, .ENV, Fastify, Insomnia, Knex, Zod, SQLite, Postgresql, Vitest, EsLint, Prettier |
| :rocket: URL          | https://api-rest-node-transactions.onrender.com                                                                  |

---

&nbsp;
<a id="-tecnologias"></a>

## üõ† Tecnologias

As seguintes ferramentas foram usadas na constru√ß√£o do projeto

&nbsp;

<p align="center">
  <!-- <a href= ""><img alt="" src="https://img.shields.io/static/v1?logoWidth=15&logoColor=ECD53F&logo=.ENV&label=Managing Environment Variables&message=.ENV&color=ECD53F"></a> -->
  <a href= "https://nodejs.org/en/" target="_blank" rel="noopener noreferrer"><img alt="Node.js badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/2467074c4c912dd04b12bcee1076cb5ca7ba9eaf/files/nodejs-badge.svg"></a>
  <a href= "https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer"><img alt="TypeScript badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/2467074c4c912dd04b12bcee1076cb5ca7ba9eaf/files/typescript-badge.svg"></a>
  <a href= "https://www.javascript.com/" target="_blank" rel="noopener noreferrer"><img alt="JavaScript badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/2467074c4c912dd04b12bcee1076cb5ca7ba9eaf/files/javascript-badge.svg"></a>
  <a href= "https://www.fastify.io/" target="_blank" rel="noopener noreferrer"><img alt="Fastify badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/2467074c4c912dd04b12bcee1076cb5ca7ba9eaf/files/fastify-badge.svg"></a>
  <a href= "https://www.dotenv.org/" target="_blank" rel="noopener noreferrer"><img alt="Dotenv badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/4eed338fdcd547570ed365f2b344e43c8202e88f/files/dotenv-badge.svg"></a>
  <a href= "https://knexjs.org/" target="_blank" rel="noopener noreferrer"><img alt="KnexJs badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/57d2e9290214202d93a058e2725693cd2fed8ac5/files/knex-badge.svg"></a>
  <a href= "https://zod.dev/" target="_blank" rel="noopener noreferrer"><img alt="ZOD badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/7caba2f743ee9b61f0225a22da57466ecb67097c/files/zod-badge.svg"></a>
  <a href= "https://www.sqlite.org/index.html" target="_blank" rel="noopener noreferrer"><img alt="SQLite badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/2467074c4c912dd04b12bcee1076cb5ca7ba9eaf/files/sqLite-badge.svg"></a>
  <a href= "https://www.postgresql.org/"><img alt="Postgresql badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/380d9654d47c0618b7eb4bdf17b528d0fda04e48/files/postgresql-badge.svg"></a>
  <a href= "https://vitest.dev/"><img alt="Vitest Badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/28993b470420f2c44db532b4e6e662e60a186954/files/vitest-badge.svg"></a>
  <a href= "https://insomnia.rest/" target="_blank" rel="noopener noreferrer"><img alt="Insomnia badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/2467074c4c912dd04b12bcee1076cb5ca7ba9eaf/files/insomnia-badge.svg"></a>
  <a href= "https://code.visualstudio.com/download" target="_blank" rel="noopener noreferrer"><img alt="vscode download" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/2467074c4c912dd04b12bcee1076cb5ca7ba9eaf/files/vsCode-badge.svg"></a>
  <a href= "https://github.com/prettier/prettier" target="_blank" rel="noopener noreferrer"><img alt="code formatter prettier" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/2467074c4c912dd04b12bcee1076cb5ca7ba9eaf/files/prettier-badge.svg"></a>
  <a href= "https://eslint.org/" target="_blank" rel="noopener noreferrer"><img alt="code standardization eslint" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/59575ed19b13121cd113cfc66a71f18dea210c79/files/eslint-badge.svg"></a>
</p>

---

&nbsp;
<a id="-instala√ß√£o"></a>

## ‚öôÔ∏è Instala√ß√µes

### Criando projeto NodeJs

```bash
# Criando projeto NodeJs com o npm init -y (-y para n√£o precisar responder as perguntas)
npm init -y

# Adicionando o type module para o NodeJs reconhecer o import/export em vez do require do CommonJS
# Adicionar no arquivo package.json no campo "type"
"type": "module",
```

```json
// Adicionar no arquivo package.json no campo "scripts"
"scripts": {
  "dev": "tsx watch src/server.ts", // start server
  "knex": "node --no-warnings --loader tsx ./node_modules/knex/bin/cli.js", // knex
  "test": "vitest", // test
  "build": "tsup src", // compile typescript project to js to build production
  "prod": "node build/server.js" // start server in production
},
```

### Instalando depend√™ncias

```bash
npm install -D typescript # Instalando o TypeScript em modo de desenvolvimento
npx tsc --init # Inicializando o TypeScript
npm install -D @types/node # Instalando o @types/node para o TypeScript reconhecer os m√©todos do NodeJs
npm install -D tsx # Instalando o tsx para compilar o TypeScript em tempo real *usar somente em ambiente de desenvolvimento!
```

```json
"target": "es2020", // Alterando o target do TypeScript para o ES2020 em tsconfig.json
```

```bash
npm install fastify # Instalando o Fastify
npm install @fastify/cookie # Instalando o @fastify/cookie para usar cookies no Fastify
npm install knex # Instalando o Knex para usar o banco de dados
npm install -D sqlite3 # Instalando o sqlite3 para o banco de dados SQLite3
npm install pg # Instalando o pg para o banco de dados PostgreSQL
npm install dotenv # Instalando o dotenv para usar vari√°veis de ambiente no NodeJs
# Criar arquivo .env na raiz do projeto e adicionar as vari√°veis de ambiente e o arquivo env.example para exemplificar as vari√°veis. Obs.: N√£o adicionar o .env no gitignore
npm install zod # Instalando o zod para validar os dados de entrada
npm install -D vitest # Instalando o vitest para testes unit√°rios
npm install -D supertest # Instalando o supertest para testes de integra√ß√£o
npm install -D @types/supertest # Instalando o @types/supertest para o TypeScript reconhecer os m√©todos do supertest
npm install -D tsup # Instalando o tsup para compilar o TypeScript em modo de produ√ß√£o
```

### Configurando ESlint

```bash
# Instalando Eslint
npm init @eslint/config

# ‚àö How would you like to use ESLint? ¬∑ style
# ‚àö What type of modules does your project use? ¬∑ esm
# ‚àö Which framework does your project use? ¬∑ none
# ‚àö Does your project use TypeScript? ¬∑ Yes
# ‚àö Where does your code run? ¬∑ browser
# ‚àö How would you like to define a style for your project? ¬∑ prompt
# ‚àö What format do you want your config file to be in? ¬∑ JSON
# ‚àö What style of indentation do you use? ¬∑ 2
# ‚àö What quotes do you use for strings? ¬∑ double
# ‚àö What line endings do you use? ¬∑ windows
# ‚àö Do you require semicolons? ¬∑ Yes

# Adicionar em ident a op√ß√£o { "SwitchCase": 1 }, para corrigir erro de edenta√ß√£o em switchCase
"indent": ["error", 2, { "SwitchCase": 1 }],

# Adicionar ignorePatterns "*.config.cjs" para ignorar os arquivos de configura√ß√£o. Ou adicione no top dos arquivos /* eslint-env node */, pois Node √© o ambiente real durante a compila√ß√£o.
"ignorePatterns": ["*.config.cjs"]
```

### Configurando knex.js

```ts
// Criar arquivo knexfile.js na raiz do projeto e adicionar o c√≥digo abaixo
import { configKnex } from "./src/database";

export default configKnex;
// Obs: em database.ts adicionar export default configKnex;

// Adicionar no arquivo database.ts onde deve ser salvo as migrations
migrations: {
  extension: "ts",
  directory: "./db/migrations",
}

// Adicionar em package.json no campo "scripts"
"knex": "node --no-warnings --loader tsx ./node_modules/knex/bin/cli.js"
// Obs: --no-warnings --loader tsx para o knex.js reconhecer o TypeScript

npm run knex -- migrate:make create-transactions
// Comando usado para criar migrates (npm run knex -- migrate:make + nome da migrate)

npm run knex -- migrate:latest
// Comando usado para rodar as migrates (npm run knex -- migrate:latest)

npm run knex -- migrate:rollback
// Comando usado para desfazer as migrates (npm run knex -- migrate:rollback)

```

&nbsp;

---

&nbsp;
<a id="-funcionalidades"></a>

## ‚öôÔ∏è Funcionalidades

### RF - Requisitos Funcionais

- Usu√°rio deve poder criar novas transa√ß√µes;
- Usu√°rio deve poder listar todas as transa√ß√µes que ja foram criadas;
- Usu√°rio deve poder obter um resumo da conta, com o total de entradas, sa√≠das e o total de cr√©dito;
- Usu√°rio deve poder visualizar uma transa√ß√£o espec√≠fica;

### RN - Regras de Neg√≥cio

- A transa√ß√£o deve ser do tipo entrada (cr√©dito) ou sa√≠da (d√©bito);
- Deve ser poss√≠vel identificar o usu√°rio que criou as transa√ß√µes, (Obs: N√£o √© necess√°rio autentica√ß√£o);

### RNF - Requisitos N√£o Funcionais

- Testes e2e de todas as rotas em Vitest;
- Uso de sqlite em ambiente Dev e PostgreSQL em ambiente Prod;
- Uso de Knex.js para migrations e queries;
- Uso de Fastify.js para rotas e middlewares;
- Uso de Zod.js para valida√ß√£o de dados de entrada;
- Uso de Supertest.js para testes de integra√ß√£o;
- Uso de Tsup.js para compilar o TypeScript em modo de produ√ß√£o;
- Uso de Eslint para padroniza√ß√£o de c√≥digo;
- Uso de Prettier para padroniza√ß√£o de c√≥digo;

&nbsp;

### üß≠ Rodando a aplica√ß√£o web (Modo desenvolvimento)

```bash
# Clone este reposit√≥rio
git clone https://github.com/livioalvarenga/API-Rest-Node-Transactions.git
# Acesse a pasta do projeto no seu terminal/cmd
cd API-Rest-Node-Transactions
# Instale as depend√™ncias
npm install
# Execute a aplica√ß√£o em modo de desenvolvimento
npm run dev
# A aplica√ß√£o ser√° aberta na porta:3333 - acesse http://localhost:3333
```

### Testando requests com Insomnia

```bash
npm run dev # start server
# Escolha a vari√°vel dev (vermelho) em Insomnia

# Para testar a API com deploy no render use a vari√°vel prod (verde) em Insomnia
```

> Importar o arquivo `Insomnia.json` no Insomnia para testar as requests

![Insomnia](https://github.com/LivioAlvarenga/API-Rest-Node-Transactions/blob/master/files/insomnia.png?raw=true)

&nbsp;

---

&nbsp;
<a id="-autor"></a>

## ü¶∏ Autor

Ol√°, eu sou Livio Alvarenga, Engenheiro de Produ√ß√£o | Dev Back-end e Front-end. Sou aficcionado por tecnologia, programa√ß√£o, processos e planejamento. Uni todas essas paix√µes em uma s√≥ profiss√£o. D√∫vidas, sugest√µes e cr√≠ticas s√£o super bem vindas. Seguem meus contatos.

- [www.livioalvarenga.com](https://livioalvarenga.com)
- contato@livioalvarenga.com

&nbsp;

<p align="center">
  <a href= "https://www.livioalvarenga.com/"><img alt="portif√≥lio livio alvarenga" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/3109a24e71f07dbad193ae0ddbc43b69b39c7adf/files/badgePortifolioLivio.svg"></a>
  <a href= "https://www.linkedin.com/in/livio-alvarenga-planejamento-mrp-engenheiro-produ%C3%A7%C3%A3o-materiais-vba-powerbi/"><img alt="perfil linkedin livio alvarenga" src="https://img.shields.io/static/v1?logoWidth=15&logoColor=0A66C2&logo=LinkedIn&label=LinkedIn&message=Livio Alvarenga&color=0A66C2"></a>
  <a href= "https://twitter.com/AlvarengaLivio"><img alt="perfil twitter livio alvarenga" src="https://img.shields.io/static/v1?logoWidth=15&logoColor=1DA1F2&logo=Twitter&label=Twitter&message=@AlvarengaLivio&color=1DA1F2"></a>
  <a href= "https://www.instagram.com/livio_alvarenga/"><img alt="perfil instagram livio alvarenga" src="https://img.shields.io/static/v1?logoWidth=15&logoColor=E4405F&logo=Instagram&label=Instagram&message=@livio_alvarenga&color=E4405F"></a>
  <a href= "https://www.facebook.com/profile.php?id=100083957091312"><img alt="perfil facebook livio alvarenga" src="https://img.shields.io/static/v1?logoWidth=15&logoColor=1877F2&logo=Facebook&label=Facebook&message=Livio Alvarenga&color=1877F2"></a>
  <a href= "https://www.youtube.com/channel/UCrZgsh8IWyyNrRZ7cjrPbcg"><img alt="perfil youtube livio alvarenga" src="https://img.shields.io/static/v1?logoWidth=15&logoColor=FF0000&logo=YouTube&label=Youtube&message=Livio Alvarenga&color=FF0000"></a>
</p>
<p align="center">
 <a href= "https://cursos.alura.com.br/vitrinedev/livioalvarenga"><img alt="perfil vitrinedev livio alvarenga" align="center" height="30" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/e0f5b5a82976af114d957c20f0c78b4d304a68a0/files/vitrinedev.svg"></a>
</p>

---

&nbsp;
<a id="-licen√ßa"></a>

## üìù Licen√ßa

Este projeto √© [MIT licensed](./LICENSE).

##### _#CompartilheConhecimento_
